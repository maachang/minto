# tools=ローカルminto実行環境用.

AWSコンソールを使って aws lambda 上で開発を行う事は非常に開発効率が悪いです。

ソースコードを変更する度に
- Deploy

またlambda実行は `関数URL` なのでブラウザから所定のURLを実行しますが、ここで実行されたログ確認は
- cloudWatch

で確認する事になる事からも、aws lambda上での開発確認は、非常に面倒である事が自明の理であると言えます。

この辺のAWS Lambda の開発効率の悪さの対策として、tools 配下に存在するプログラムによって、ローカル環境で AWS Lambda の関数URL環境と同等に動くローカル環境で実現するための実装が行われています。

以下より、各ファイル単位の説明を行いたいと思います。

## index.js

ローカル環境でのメイン的な形で利用されます。

このファイルが直接以下コマンド
- minto

で呼び出される js ファイルとなります。

内容的には
- ローカルログ環境の構築
- Webアプリサーバの起動(webapps.js)

これらが実行されて「ローカルテスト用のWebアプリ環境」が起動します。

また `conf/minto.json` が定義されている場合、そのJSON内容を読み込み
- bindPort

が定義されている場合ローカルテスト用のWebアプリバインドポート番号を指定することが出来ます。

## webapps.js

ローカルテスト用のWebアプリ環境を実装している js ファイルです.

ここでは `MINTO_HOME` 環境変数から `lambda/src/index.js` を１つのHTTPリクエストとして実行されます。

またこの js ファイルが AWS lambda の `関数URL` に対するHTTPアクセスの振る舞いを模倣する形で ローカル環境で lambda 関数URL環境をローカル環境で実装・検証する事が出来ます。

## mtPack.js

この js ファイルは
- mtpk コマンド

に対するソースコードです。

## localLog.js

この js ファイルは
- console 系

これのローカルファイル出力関連の wrapper 実装となります。

## jhtml.js

minto での jhtml テンプレート 実装内容となります。

jhtml テンプレートは、比較的単純な テンプレート で、ローカルテスト用のWebアプリでは、この jhtml テンプレートファイルを読み込んで実行されます。

## mintoUtil.js

minto 用の ユーティリティ js です。

## args.js

実行されるコマンド
- minto
- mtpk

これらにおける `コマンドの設定パラメータ` を 便利に利用するためのライブラリです。

## xor128.js

xor128(高速で質もよい疑似乱数生成アルゴリズム) の実装です.







